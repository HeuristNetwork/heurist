<html>
 <head>
  <link rel=stylesheet href=../css/heurist.css>
  <link rel=stylesheet href=../css/heurist-edit-tab.css>
  <link rel=stylesheet href=../css/keyword-editor.css>

  <style>
	.keyword-list {
		height: 320px;
	}
  </style>
 </head>

 <body>
  <script src=../js/heurist.js></script>
  <script src=../php/js/display-preferences.php></script>

   <div>
    <h2 style="float: left; margin: 0;">Workgroup tags &nbsp;&nbsp;</h2>
    <span class="help prompt" style="font-size: 11px;">
       These tags can only be added or removed by members of the workgroup.<br>
       Use them to flag records for publication in website listings.
    </span>

    <br clear=all>

    <table border=0 cellspacing=0 cellpadding=0 style="margin: 10px 0;">
     <tr>
      <td><b>Available</b></td>
      <td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
      <td><b>Selected</b></td>
     </tr>

     <tr>
      <td>
       <div class=keyword-list><table border=0 cellspacing=0 cellpadding=0><tbody id=all-workgroup-keywords></tbody></table></div>
      </td>
      <td>
       <div id=button-box>
        <div><input type=button value="&gt;" title="Add a tag" onmousedown="HEURIST.keywordEditor.addKeyword(window.selectedRow)" disabled id=add-button></div>
        <div>&nbsp;&nbsp;</div>
        <div><input type=button value="&lt;" title="Remove a tag" onmousedown="HEURIST.keywordEditor.removeKeyword(window.selectedRow)" disabled id=remove-button></div>
       </div>
      </td>
      <td>
       <div class=keyword-list><table border=0 cellspacing=0 cellpadding=0><tbody id=current-workgroup-keywords></tbody></table></div>
      </td>
     </tr>

     <tr class=help>
      <td class=prompt>Double-click on a tag to add it to this record</td>
      <td>&nbsp;&nbsp;</td>
      <td class=prompt>Double-click on a tag to remove it from this record</td>
     </tr>
     <tr><td>
     	<div id="admin-wgKeywords"><br><a href="../legacy/workgroup_keyword_manager.php" target="_blank"> Click here </a> to add/delete tags for workgroups (administrators only). </div>
     </td></tr>
    </table>

    <form id=keyword-form jsonAction=php/save-keywords.php action=../php/save-keywords.php></form>

<script src=../js/keyword-editor.js></script>
<script>

var removeButton = document.getElementById("remove-button");
var addButton = document.getElementById("add-button");

document.forms[0].heuristSubmit = function() {
	top.HEURIST.util.xhrFormSubmit(document.forms[0], function(json) {
		var vals = eval(json.responseText);
		if (vals) parent.HEURIST.record.workgroupKeywords = vals;
		window.location.reload();
	});
};
var bibInput = document.createElement("input");
	bibInput.type = "hidden";
	bibInput.name = "bib_id";
	bibInput.value = top.HEURIST.record.bibID;
document.getElementById("keyword-form").appendChild(bibInput);


var currKwdsElt = document.getElementById("current-workgroup-keywords");
var allKwdsElt = document.getElementById("all-workgroup-keywords");
new HEURIST.keywordEditor.KeywordEditor(currKwdsElt, allKwdsElt, addButton, removeButton);

</script>
   </div>

 </body>
</html>
