<!--

/**
 * filename, brief description, date of creation, by whom
 * @copyright (C) 2005-2010 University of Sydney Digital Innovation Unit.
 * @link: http://HeuristScholar.org
 * @license http://www.gnu.org/licenses/gpl-3.0.txt
 * @package Heurist academic knowledge management system
 * @todo
 **/

-->
<html>
 <head>
  <title>Heurist Flexible Import System</title>

  <script src="../../common/php/loadHAPI.php"></script>
  <script>
	if ( HAPI && ! (HCurrentUser.isLoggedIn()  &&  HCurrentUser.isAdministrator())){
		window.location = HeuristBaseURL + "common/connect/login.php?db="+HAPI.database;//saw FIXME: instance code here
	}
  </script>

  <script src="../../hapi/js/goi.js"></script>

  <script src="../../external/jquery/jquery.js"></script>
  <script src="../../common/js/temporalObjectLibrary.js"></script>
  <script src="importRecordsFromDelimited.js"></script>

  <style>
	#csv-textarea {
		width: 100%;
		height: 400px;
		border: 2px solid black;
	}
	#csv-separator, #csv-terminator { width: 30px; }
	table { border-collapse: collapse; }
	td { width: 100px; border: 1px solid gray; padding: 2px; }
	td select { width: 100px; }
	td.error { color: red; }
	#col-select-row td { border: none; padding: 1px 5px 5px 0px; vertical-align: top; }
	.invalidRecord { background-color: FFCBCB;}
	.invalidInput { font-weight: bold; color: red;}
	.errorMsg { font-size: 70%; color: red;}
  </style>
 </head>

 <body>
  <h2>Heurist flexible import system</h2>
  <p id=info-p></p>
  <p id=rec-type-select-div></p>
  <p id=col-select-div></p>
  <div id=results></div>
  <p id=records-div></p>
	<div id=csv-entry-div>
   <p>Paste some CSV data into the box below and click "analyse".</p>
   <p>Note: geographic data is accepted in OpenGIS WKT format, e.g. POINT(x y).<br>
      See <a href="http://en.wikipedia.org/wiki/Well-known_text">this Wikipedia article</a> for more details.</p>
   <p>You can have multiple geographic objects (of the same type) per column, separated
      by the | (pipe) character, i.e. POINT(x y)|POINT(x y)|...</p>
   <p>You needn't assign all the columns - unassigned columns will be ignored.</p>
   <p>Duplicate records will not be created: multiple effectively equivalent lines (for the columns you have assigned) will result in only one record.</p>
   <p>To specify multiple values for a repeatable detail, separate the values with commas within a field, e.g. 1,2,"3,4",5</p>
   <div>
    Field separator: <input id=csv-separator value=,>
    Line separator: <input id=csv-terminator value=\n>
    Quote: <select id=csv-quote><option selected>"</option><option>'</option></select>
    <input type=button value=analyse onclick="FlexImport.analyseCSV();">
   </div>

   <div><textarea id=csv-textarea></textarea></div>
  </div>

 </body>
</html>
