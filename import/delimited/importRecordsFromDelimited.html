<!--

/**
* filename, brief description, date of creation, by whom
* @copyright (C) 2005-2010 University of Sydney Digital Innovation Unit.
* @link: http://HeuristScholar.org
* @license http://www.gnu.org/licenses/gpl-3.0.txt
* @package Heurist academic knowledge management system
* @todo
**/

-->
<html>
	<head>
		<title>Heurist Flexible Import System</title>

		<script src="../../common/php/loadHAPI.php"></script>
		<script src="../../common/php/getMagicNumbers.php"></script>
		<script>
			if (!(HAPI && HAPI.CurrentUser.isLoggedIn())){
				window.location = HeuristBaseURL + "common/connect/login.php?db="+HAPI.database;//saw FIXME: instance code here
			}
		</script>

		<script src="../../hapi/js/goi.js"></script>

		<script src="../../external/jquery/jquery.js"></script>
		<script src="../../common/js/temporalObjectLibrary.js"></script>
		<script src="importRecordsFromDelimited.js"></script>

		<style>
			#csv-textarea {
				width: 100%;
				height: 400px;
				border: 1px solid #6A7C99;
			}
			#csv-separator { width: 70px; }
			#val-separator, #csv-terminator { width: 30px; }
			table { border-collapse: collapse; }
			td { width: 100px; border: 1px solid gray; padding: 2px; }
			td select { width: 100px; }
			td.error { color: red; }
			#col-select-row td { border: none; padding: 1px 5px 5px 0px; vertical-align: top; }
			.invalidRecord { background-color: FFCBCB;}
			.invalidInput { font-weight: bold; color: red;}
			.errorMsg { font-size: 70%; color: red;}
		</style>
	<link rel=stylesheet href="../../common/css/global.css" media="all">
	<link rel=stylesheet href="../../common/css/admin.css" media="all">
	</head>

	<body class="popup">
		<h2>CSV (comma-separated values) importer</h2>
		<p id=info-p></p>
		<p id=rec-type-select-div></p>
		<p id=col-select-div></p>
		<div id=results></div>
		<p id=records-div></p>
		<div id=csv-entry-div>
			<p>Paste CSV data into the box below and click "analyse". Break large files into blocks of a couple of thousand lines.</p>
			<div>
				Field separator: <select id=csv-separator><option value="," selected>comma</option><option value="\t">tab</option></select>&nbsp;&nbsp;&nbsp;
				Multi-value separator: <select id=val-separator><option selected value="|">|</option><option value=",">,</option><option value=":">:</option><option value=";">;</option></select>&nbsp;&nbsp;&nbsp;
				Line separator: <input id=csv-terminator value="\n">&nbsp;&nbsp;&nbsp;
				Quote: <select id=csv-quote><option selected value='"'>"</option><option value="'">'</option></select>&nbsp;&nbsp;&nbsp;
				Header lines: <input type="checkbox" id=csv-header />&nbsp;&nbsp;&nbsp;
				<input type=button value=analyse onClick="FlexImport.analyseCSV();">
			</div>
			<div><textarea id=csv-textarea></textarea></div>
			<p>Note: geographic data is accepted in OpenGIS WKT format, e.g. POINT(x y). See <a href="http://en.wikipedia.org/wiki/Well-known_text">this Wikipedia article</a> for more details.</p>
			<p>To specify multiple values for a repeatable field, separate the values with a | (pipe) symbol within the field, eg. 1,2,"3|4",5</p>
			<p>You can have multiple geographic objects (of the same type) per field eg. POINT(x y)|POINT(x y)|...</p>
			<p>You needn't assign all the columns - unassigned columns will be ignored.</p>
			<p>Duplicate records will not be created: lines which are effectively equivalent (ie. for the columns you have assigned) will result in only one record.</p>
		</div>

	</body>
</html>
