<?xml version="1.0" encoding="UTF-8"?>
<map:sitemap xmlns:map="http://apache.org/cocoon/sitemap/1.0">

 <map:components>
  <map:generators default="file"/>
  <map:transformers default="xslt"/>
  <map:serializers default="html"/>
  <map:readers default="resource"/>
  <map:matchers default="wildcard"/>
  <map:selectors default="browser"/>
  <map:pipes default="caching"/>
 </map:components>
 <map:resources>
  <map:resource name="display-xml">
   <map:serialize type="xml"/>
  </map:resource>
  <map:resource name="display-html">
   <map:serialize type="html"/>
  </map:resource>
  <map:resource name="display-wml">
   <map:serialize type="wml"/>
  </map:resource>
 </map:resources>



 <map:pipelines>
  <!-- main pipeline -->
  <map:pipeline>

    <map:match pattern="*/random_image-js/*">
      <map:act type="request">
        <map:parameter name="parameters" value="true"/>
        <map:generate src="/h3/output/export/xml/hml.php?pub_id={../1}&amp;depth=1&amp;limit=1000"/>
        <map:transform src="/h3/output/pubwizard/xsl/heurist_legacy_xml.xsl"/>
        <map:transform src="/h3/output/pubwizard/xsl/random_image-js.xsl">
          <map:parameter name="width" value="{../2}"/>
        </map:transform>
      </map:act>
      <map:serialize type="javascript"/>
    </map:match>

    <map:match pattern="*/*/*-javascript">
      <map:act type="request">
        <map:parameter name="parameters" value="true"/>
        <map:generate src="/h3/output/export/xml/hml.php?pub_id={../1}&amp;depth=1&amp;limit=1000"/>
        <map:transform src="/h3/output/pubwizard/xsl/heurist_legacy_xml.xsl"/>
        <map:transform src="/h3/output/pubwizard/xsl/{../2}.xsl">
          <map:parameter name="arg" value="{../3}"/>
			<map:parameter name="id" value="{../1}"/>
			<map:parameter name="appBase" value="/{global:installDir}/{global:cocoonPubPath}/"/>
			<map:parameter name="hBase" value="http://{global:serverName}/{global:installDir}/"/>
			<map:parameter name="hIBase" value="http://{global:instancePrefix}{global:serverName}/{global:installDir}/"/>
			<map:parameter name="instance" value="{global:instanceName}"/>
			<map:parameter name="serverBaseUrl" value="{global:serverBaseURL}"/>
			<map:parameter name="cocoonBase" value="{global:cocoonPubPath}/"/>
			<map:parameter name="related_reftype_filter" value="{2}"/>
        </map:transform>
        <map:transform src="/h3/output/pubwizard/xsl/javascript.xsl"/>
      </map:act>
      <map:serialize type="javascript"/>
    </map:match>

    <map:match pattern="*/*/*.xsl">
      <map:act type="request">
        <map:parameter name="parameters" value="true"/>
        <map:generate src="/h3/output/export/xml/hml.php?pub_id={../1}&amp;depth=1&amp;limit=1000"/>
        <map:transform src="/h3/output/pubwizard/xsl/heurist_legacy_xml.xsl"/>
        <map:transform src="/h3/output/pubwizard/xsl/{../3}.xsl">
			<map:parameter name="id" value="{../1}"/>
			<map:parameter name="appBase" value="/{global:installDir}/{global:cocoonPubPath}/"/>
			<map:parameter name="hBase" value="http://{global:serverName}/{global:installDir}/"/>
			<map:parameter name="hIBase" value="http://{global:instancePrefix}{global:serverName}/{global:installDir}/"/>
			<map:parameter name="instance" value="{global:instanceName}"/>
			<map:parameter name="serverBaseUrl" value="{global:serverBaseURL}"/>
			<map:parameter name="cocoonBase" value="{global:cocoonPubPath}/"/>
			<map:parameter name="related_reftype_filter" value="{2}"/>
        </map:transform>
        <map:call resource="display-{../2}"/>
      </map:act>
    </map:match>

    <map:match pattern="*/*/*">
      <map:act type="request">
        <map:parameter name="parameters" value="true"/>
        <map:generate src="/h3/output/export/xml/hml.php?pub_id={../1}&amp;depth=1&amp;limit=1000"/>
        <map:transform src="/h3/output/pubwizard/xsl/heurist_legacy_xml.xsl"/>
        <map:transform src="/h3/output/pubwizard/xsl/{../2}.xsl">
          <map:parameter name="arg" value="{../3}"/>
			<map:parameter name="id" value="{../1}"/>
			<map:parameter name="appBase" value="/{global:installDir}/{global:cocoonPubPath}/"/>
			<map:parameter name="hBase" value="http://{global:serverName}/{global:installDir}/"/>
			<map:parameter name="hIBase" value="http://{global:instancePrefix}{global:serverName}/{global:installDir}/"/>
			<map:parameter name="instance" value="{global:instanceName}"/>
			<map:parameter name="serverBaseUrl" value="{global:serverBaseURL}"/>
			<map:parameter name="cocoonBase" value="{global:cocoonPubPath}/"/>
			<map:parameter name="related_reftype_filter" value="{2}"/>
        </map:transform>
      </map:act>
      <map:serialize/>
    </map:match>

    <map:match pattern="*/random_image-js">
      <map:act type="request">
        <map:parameter name="parameters" value="true"/>
        <map:generate src="/h3/output/export/xml/hml.php?pub_id={../1}&amp;depth=1&amp;limit=1000"/>
        <map:transform src="/h3/output/pubwizard/xsl/heurist_legacy_xml.xsl"/>
        <map:transform src="/h3/output/pubwizard/xsl/random_image-js.xsl"/>
      </map:act>
      <map:serialize type="javascript"/>
    </map:match>

    <map:match pattern="*/*.xsl-javascript">
      <map:act type="request">
        <map:parameter name="parameters" value="true"/>
        <map:generate src="/h3/output/export/xml/hml.php?pub_id={../1}&amp;depth=1&amp;limit=1000"/>
        <map:transform src="/h3/output/pubwizard/xsl/heurist_legacy_xml.xsl"/>
        <map:transform src="/h3/output/pubwizard/xsl/{../2}.xsl">
			<map:parameter name="id" value="{../1}"/>
			<map:parameter name="appBase" value="/{global:installDir}/{global:cocoonPubPath}/"/>
			<map:parameter name="hBase" value="http://{global:serverName}/{global:installDir}/"/>
			<map:parameter name="hIBase" value="http://{global:instancePrefix}{global:serverName}/{global:installDir}/"/>
			<map:parameter name="instance" value="{global:instanceName}"/>
			<map:parameter name="serverBaseUrl" value="{global:serverBaseURL}"/>
			<map:parameter name="cocoonBase" value="{global:cocoonPubPath}/"/>
			<map:parameter name="related_reftype_filter" value="{2}"/>
        </map:transform>
        <map:transform src="/h3/output/pubwizard/xsl/javascript.xsl"/>
      </map:act>
      <map:serialize type="javascript"><encoding>UTF-8</encoding></map:serialize>
    </map:match>

    <map:match pattern="*/*-javascript">
      <map:act type="request">
        <map:parameter name="parameters" value="true"/>
        <map:generate src="/h3/output/export/xml/hml.php?pub_id={../1}&amp;depth=1&amp;limit=1000"/>
        <map:transform src="/h3/output/pubwizard/xsl/heurist_legacy_xml.xsl"/>
        <map:transform src="/h3/output/pubwizard/xsl/{../2}.xsl">
			<map:parameter name="id" value="{../1}"/>
			<map:parameter name="appBase" value="/{global:installDir}/{global:cocoonPubPath}/"/>
			<map:parameter name="hBase" value="http://{global:serverName}/{global:installDir}/"/>
			<map:parameter name="hIBase" value="http://{global:instancePrefix}{global:serverName}/{global:installDir}/"/>
			<map:parameter name="instance" value="{global:instanceName}"/>
			<map:parameter name="serverBaseUrl" value="{global:serverBaseURL}"/>
			<map:parameter name="cocoonBase" value="{global:cocoonPubPath}/"/>
			<map:parameter name="related_reftype_filter" value="{2}"/>
        </map:transform>
        <map:transform src="/h3/output/pubwizard/xsl/javascript.xsl"/>
      </map:act>
      <map:serialize type="javascript"><encoding>UTF-8</encoding></map:serialize>
    </map:match>

    <map:match pattern="*/*.xsl">
      <map:act type="request">
        <map:parameter name="parameters" value="true"/>
        <map:generate src="/h3/output/export/xml/hml.php?pub_id={../1}&amp;depth=1&amp;limit=1000"/>
        <map:transform src="/h3/output/pubwizard/xsl/heurist_legacy_xml.xsl"/>
        <map:transform src="/h3/output/pubwizard/xsl/{../2}.xsl">
			<map:parameter name="id" value="{../1}"/>
			<map:parameter name="appBase" value="/{global:installDir}/{global:cocoonPubPath}/"/>
			<map:parameter name="hBase" value="http://{global:serverName}/{global:installDir}/"/>
			<map:parameter name="hIBase" value="http://{global:instancePrefix}{global:serverName}/{global:installDir}/"/>
			<map:parameter name="instance" value="{global:instanceName}"/>
			<map:parameter name="serverBaseUrl" value="{global:serverBaseURL}"/>
			<map:parameter name="cocoonBase" value="{global:cocoonPubPath}/"/>
			<map:parameter name="related_reftype_filter" value="{2}"/>
        </map:transform>
      </map:act>
      <map:serialize/>
    </map:match>

    <map:match pattern="*/*">
      <map:act type="request">
        <map:parameter name="parameters" value="true"/>
        <map:generate src="/h3/output/export/xml/hml.php?pub_id={../1}&amp;depth=1&amp;limit=1000"/>
        <map:transform src="/h3/output/pubwizard/xsl/heurist_legacy_xml.xsl"/>
        <map:transform src="/h3/output/pubwizard/xsl/{../2}.xsl">
			<map:parameter name="id" value="{../1}"/>
			<map:parameter name="appBase" value="/{global:installDir}/{global:cocoonPubPath}/"/>
			<map:parameter name="hBase" value="http://{global:serverName}/{global:installDir}/"/>
			<map:parameter name="hIBase" value="http://{global:instancePrefix}{global:serverName}/{global:installDir}/"/>
			<map:parameter name="instance" value="{global:instanceName}"/>
			<map:parameter name="serverBaseUrl" value="{global:serverBaseURL}"/>
			<map:parameter name="cocoonBase" value="{global:cocoonPubPath}/"/>
			<map:parameter name="related_reftype_filter" value="{2}"/>
        </map:transform>
      </map:act>
      <map:serialize/>
    </map:match>


    <map:match pattern="*">
      <map:act type="request">
        <map:parameter name="parameters" value="true"/>
        <map:generate src="/h3/output/export/xml/hml.php?pub_id={../1}&amp;depth=1&amp;limit=1000"/>
      </map:act>
      <map:serialize type="xml"/>
    </map:match>

  </map:pipeline>
 </map:pipelines>
</map:sitemap>
