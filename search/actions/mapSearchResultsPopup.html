<!--

/**
 * filename, brief description, date of creation, by whom
 * @copyright (C) 2005-2010 University of Sydney Digital Innovation Unit.
 * @link: http://HeuristScholar.org
 * @license http://www.gnu.org/licenses/gpl-3.0.txt
 * @package Heurist academic knowledge management system
 * @todo
 **/

-->
<html>

<head>
 <link rel=stylesheet href="../common/css/global.css">
 <title>Map search results</title>
 <script>

	function build_links() {
		if (! top.HEURIST  ||  ! top.HEURIST.parameters) return;
		var p = top.HEURIST.parameters;
		var query_string = '?ver='+(p['ver'] || "") + '&w='+(p['w'] || "") + '&q=' +
			(!p['q'] ? "" :
				(p['w'].search(/bookmark/) > -1 && p['q'].search(/user/) == -1 && top.HEURIST.get_user_id ?
					p['q'] + " user:" + top.HEURIST.get_user_id() :
					p['q'])) +
			'&stype='+(p['stype'] || "");
		query_string = encodeURI(query_string);
		var elts = document.documentElement.getElementsByTagName('A');
		for (var i=0; i < elts.length; ++i) {
			elts[i].href += query_string;
		}

		var url = location.href.replace(/popup.*/, "mapper/") + query_string;//FIXME does this work with the new structure??
		document.getElementById("code-textbox").value = '<iframe src="' + url + '" width="800" height="650" frameborder="0"></iframe>';
	}
 </script>
</head>

<body class="popup" onload="build_links()" width=600 height=450>

<p>
 Note: records will only appear on the map if they include geographic objects.
 You may get an empty or sparsely populated map if the search results do not
 contain map data. <br>&nbsp;
</p>



<p><img src="../common/images/google-earth-logo.gif" align="middle"> &nbsp; &nbsp;
<a href="../viewers/map/getKMLForQuery.php/heurist-map.kml" onclick="setTimeout(window.close, 1000)"><b>Google Earth</b></a></p>

<img src="../common/images/google-maps-logo.gif" align="middle"> &nbsp; &nbsp;
<a href="../viewers/map/showGMapWithTimeline.html" target=_new onclick="setTimeout(window.close, 0);"><b>Google Map + Timeline</b></a>

<p>
<blockquote>
   Embed this Google Map (plus timeline) in your own web page:
   Copy the following html code into your page where you want to place the map,
   or use the URL on its own. The map will be generated live from the database
   using the current search criteria whenever the map is loaded.
   <br>
   <br>
  <textarea readonly style="border: 1px dotted gray; padding: 3px; margin: 2; font-family: times; font-size: 10px; width: 100%; height: 60px;" id=code-textbox onclick="select(); if (window.clipboardData) clipboardData.setData('Text', value);"></textarea>
</blockquote>



</body>
</html>
