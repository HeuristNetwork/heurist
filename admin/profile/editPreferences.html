<!--

/**
 * editPreferences.html, edits display preferences
 * @copyright (C) 2005-2010 University of Sydney Digital Innovation Unit.
 * @link: http://HeuristScholar.org
 * @license http://www.gnu.org/licenses/gpl-3.0.txt
 * @package Heurist academic knowledge management system
 * @todo
 **/

-->
<html>
<head>
  <title>Heurist display preferences</title>
	<link rel=stylesheet href="../../common/css/global.css">
	<link rel=stylesheet href="../../common/css/edit.css">
	<link rel=stylesheet href="../../common/css/admin.css">
	<style>
	.input-row, .input-row .input-header-cell, .input-row div.input-cell {vertical-align:middle}
	</style>
		
</head>

<body class="popup" onLoad="showPreferences()" width=500 height=400>

  <script src="../../common/js/utilsLoad.js"></script>
  <script>
	function showPreferences() {
		document.getElementById("results-per-page").value
			= top.HEURIST.util.getDisplayPreference("results-per-page");
		document.getElementById("defaultSearch").value
			= top.HEURIST.util.getDisplayPreference("defaultSearch");
		document.getElementById("favourites").value
			= top.HEURIST.util.getDisplayPreference("favourites");
		// document.getElementById("loadRelatedOnSearch").value
			// = top.HEURIST.util.getDisplayPreference("loadRelatedOnSearch");
		var rel = top.HEURIST.util.getDisplayPreference("loadRelatedOnSearch");
		document.getElementById("loadRelatedOnSearch").checked
			= (rel==='true');
		var rec = top.HEURIST.util.getDisplayPreference("defaultRecentPointerSearch"); // pointer field editing
		document.getElementById("defaultRecentPointerSearch").checked
			= (rec==='true');
		var bkm = top.HEURIST.util.getDisplayPreference("defaultMyBookmarksSearch"); // main search default on [enter]
		document.getElementById("defaultMyBookmarksSearch").checked
			= (bkm==='true');
	}

	function save() {
		var rpp = parseInt(document.getElementById("results-per-page").value);
		var def = document.getElementById("defaultSearch").value;
		var fav = document.getElementById("favourites").value;
		var rel = (document.getElementById("loadRelatedOnSearch").checked)?'true':'false';
		var rec = (document.getElementById("defaultRecentPointerSearch").checked)?'true':'false';
		var bkm = (document.getElementById("defaultMyBookmarksSearch").checked)?'true':'false';

		if (rpp < 0 || rpp > 500) {
			alert("Results per page must be between 1 and 500");
			return;
		}
		top.HEURIST.util.setDisplayPreference("results-per-page", rpp);
		top.HEURIST.util.setDisplayPreference("defaultSearch", def);
		top.HEURIST.util.setDisplayPreference("favourites", fav);
		top.HEURIST.util.setDisplayPreference("loadRelatedOnSearch", rel);
		top.HEURIST.util.setDisplayPreference("defaultRecentPointerSearch", rec);
		top.HEURIST.util.setDisplayPreference("defaultMyBookmarksSearch", bkm);
		window.close();
	}
  </script>

  <!-- h2>Preferences</h2 -->


   <div class="input-row">
	<div class="input-header-cell">Search results per page (20 - 500)</div><div  class="input-cell"><input id="results-per-page"></div>
   </div>
   <div class="input-row">
	<div class="input-header-cell">Default search on load</div><div  class="input-cell"><input id="defaultSearch">
	<br><input type="checkbox" id="defaultMyBookmarksSearch" style="vertical-align:middle">Search MyBookmarks only
<!--	<br><input type="radio" name="defaultMyBookmarksSearch" value="myBookmarks">My Bookmarks
	<br><input type="radio" name="defaultMyBookmarksSearch" value="allBookmarks">All Bookmarks-->
	</div>
   </div>
   <div class="input-row">
	<div class="input-header-cell">How do you spell Favourites/Favorites?</div><div  class="input-cell"><input id="favourites"></div>
   </div>
   <div class="input-row">
	<div class="input-header-cell">Load related records below search (leave off if not required)</div><div class="input-cell"><input type="checkbox" id="loadRelatedOnSearch"></div>
  </div>
   <div class="input-row">
	<div class="input-header-cell">Default pointer field search in edit to show recent records (otherwise All Records)</div><div  class="input-cell"><input type="checkbox" id="defaultRecentPointerSearch"></div>
  </div>
  <div id="buttons" class="actionButtons">
   <input type="button" value="save" onClick="save();">
   <input type="button" value="cancel" onClick="window.close();">
  </div>
 </body>
</html>

