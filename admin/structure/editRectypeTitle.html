<!--

/**
* editRectypeTitle.html
*
* @version 2011.0812
* @author: Artem Osmakov
*
* @copyright (C) 2005-2011 University of Sydney Digital Innovation Unit.
* @link: http://HeuristScholar.org
* @license http://www.gnu.org/licenses/gpl-3.0.txt
* @package Heurist academic knowledge management system
* @todo
**/

-->
<html>
<head>
<title>Edit record type title mask</title>

<meta http-equiv="content-type" content="text/html; charset=utf-8">

<!-- yui layout -->

<link rel="stylesheet" type="text/css" href="../../external/yui/2.8.2r1/build/reset-fonts-grids/reset-fonts-grids.css">
<!-- Skin CSS files resize.css must load before layout.css -->
<link rel="stylesheet" type="text/css" href="../../external/yui/2.8.2r1/build/assets/skins/sam/resize.css">
<link rel="stylesheet" type="text/css" href="../../external/yui/2.8.2r1/build/assets/skins/sam/layout.css">
<!-- Utility Dependencies -->
<script src="../../external/yui/2.8.2r1/build/yahoo-dom-event/yahoo-dom-event.js"></script>
<script src="../../external/yui/2.8.2r1/build/dragdrop/dragdrop-min.js"></script>
<script src="../../external/yui/2.8.2r1/build/element/element-min.js"></script>
<!-- Optional Animation Support
<script src="../../external/yui/2.8.2r1/build/animation/animation-min.js"></script> -->
<!-- Optional Resize Support -->
<script src="../../external/yui/2.8.2r1/build/resize/resize-min.js"></script>
<!-- Source file for the Layout Manager -->
<script src="../../external/yui/2.8.2r1/build/layout/layout-min.js"></script>

		<!-- TREEVIEW DEFS -->
		<!-- Required CSS -->
		<link type="text/css" rel="stylesheet" href="../../external/yui/2.8.2r1/build/treeview/assets/skins/sam/treeview.css">
		<!-- Optional dependency source file -->
		<script type="text/javascript" src="../../external/yui/2.8.2r1/build/animation/animation-min.js"></script>
		<!-- Optional dependency source file to decode contents of yuiConfig markup attribute-->
		<script type="text/javascript" src="../../external/yui/2.8.2r1/build/json/json-min.js" ></script>
		<!-- TreeView source file -->
		<script type="text/javascript" src="../../external/yui/2.8.2r1/build/treeview/treeview-min.js" ></script>
		<!-- END TREEVIEW DEFS-->

	<script type="text/javascript">
			var editRectypeTitle;
	</script>

<style type="text/css">
body {
	font: 10px Verdana, Geneva, sans-serif;
}
</style>

</head>

<body class="yui-skin-sam" width=800 height=800>
		<script type="text/javascript" src="../../common/js/utilsLoad.js"></script>
		<script type="text/javascript" src="../../common/js/utilsUI.js"></script>
		<script type="text/javascript" src="../../admin/structure/editRectypeTitle.js"></script>

		<div style="position:absolute;top:0px;bottom:0px;left:0px;width:202px;">
		<div>&nbsp;<br>Select fields then click Insert<br>(add fields to record structure first)<br>&nbsp;<br></div>
		<div style="position:absolute;top:40px;bottom:10px;left:0px;width:200px;overflow-y:scroll;">
				<div id="varsTree" class="ygtv-checkbox"></div>
		</div>
		</div>
	<div id="formContainer" style="position:absolute;top:0px;bottom:0px;left:202px;right:5px;">

		<div style="padding:10px;">
		Mask to build a composite title from fields (see manual).
        The title mask is a string into which field values are inserted to create an extended title for the record, e.g. [Title], pp. [Start_Page]-[End_Page] renders the Title field and start and end page fields as in "Alice in Wonderland, pp. 37-39". The element names in square brackets should match field names for this record type. The constructed value is used as the extended title displayed in search results and other lists. To insert a literal square-bracket, use two consecutive square-brackets ([[ or ]]).
   		</div>
		<div style="padding-top:5px;padding-bottom:10px;padding-left: 20px;">
			<button onclick="onTest()" style="width:100px;">Test with record</button>&nbsp;&nbsp;<select id="listRecords" style="width:400px;"><option>select record (if any of this type exist) on which to test the result ...</option></select>
		</div>
		<div style="padding-left: 20px";>
			<div id="testResult" title="Test result will appear in this box"  style="padding-left:10px; padding:5px; width: 500px; height: 10px; border: blue 1px dashed;"></div>
		</div>
		<div style="padding-top: 20px; padding-left: 20px;">
        	<button onclick="onInsert()" style="width:100px;">Insert fields</button><br>&nbsp;<br>Mask:&nbsp;<input maxlength="500" id="rty_TitleMask" style="width:400;"/>
		</div>

		<div style="text-align:center; padding-top:10px; padding-left: 60px;">
			<button onclick="onSave()">Save</button>
			<button onclick="window.close(null)">Cancel</button>
		</div>
	</div>


<script type="text/javascript">

	//
	function onInsert(){
		window.editRectypeTitle.doInsert();
	}

	//
	//
	//
	function onTest(){
		window.editRectypeTitle.doTest();
	}

	//
	function onSave()
	{
		var edMask = document.getElementById('rty_TitleMask');
		window.close(edMask.value);
	}

	//
	//  starts initialization on load completion of this window
	//
	function loadHandler(){
		window.editRectypeTitle = new EditRectypeTitle();
	}

	YAHOO.util.Event.addListener(window, "load", loadHandler );

</script>

</body>
</html>
