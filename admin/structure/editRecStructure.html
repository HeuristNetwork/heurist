<!--

/**
* editRecStructure.html
*
* manages the structure of given rectype, edit properties for view  (width, label, order, tooltip)
*  for fields and allows to preview the record's entry form on-fly,
* invokes selectDetailType.html - to add new detailtype into record structure
*
* 2011-03-15
* @autor: Artem Osmakov
*
* @copyright (C) 2005-2010 University of Sydney Digital Innovation Unit.
* @link: http://HeuristScholar.org
* @license http://www.gnu.org/licenses/gpl-3.0.txt
* @package Heurist academic knowledge management system
* @todo  deletion
**/

-->
<html>
	<head>
		<title>Record Structure definition</title>

		<link rel="icon" href="../../favicon.ico" type="image/x-icon">
		<link rel="shortcut icon" href="../../favicon.ico" type="image/x-icon">

		<link rel="stylesheet" type="text/css" href="../../common/css/heurist.css">
		<!--  <link rel="stylesheet" type="text/css" href="../../common/css/mini.css"> -->
		<link rel="stylesheet" type="text/css" href="../../common/css/global.css">
		<link rel="stylesheet" type="text/css" href="../../common/css/edit.css">

		<!-- YUI -->
		<link rel="stylesheet" type="text/css" href="../../external/yui/2.8.2r1/build/fonts/fonts-min.css" />
		<link rel="stylesheet" type="text/css" href="../../external/yui/2.8.2r1/build/tabview/assets/skins/sam/tabview.css" />
		<link rel="stylesheet" type="text/css" href="../../external/yui/2.8.2r1/build/treeview/assets/skins/sam/treeview.css" />

		<script type="text/javascript" src="../../external/yui/2.8.2r1/build/yahoo-dom-event/yahoo-dom-event.js"></script>
		<script type="text/javascript" src="../../external/yui/2.8.2r1/build/element/element-min.js"></script>
		<script type="text/javascript" src="../../external/yui/2.8.2r1/build/tabview/tabview-min.js"></script>
		<script type="text/javascript" src="../../external/yui/2.8.2r1/build/history/history-min.js"></script>
		<script type="text/javascript" src="../../external/yui/2.8.2r1/build/treeview/treeview-min.js"></script>

		<script type="text/javascript" src="../../external/yui/2.8.2r1/build/yahoo/yahoo-min.js"></script>
		<script type="text/javascript" src="../../external/yui/2.8.2r1/build/json/json-min.js"></script>

		<link rel="stylesheet" type="text/css" href="../../external/yui/2.8.2r1/build/reset-fonts-grids/reset-fonts-grids.css"/>
		<!-- Skin CSS files resize.css must load before layout.css -->
		<link rel="stylesheet" type="text/css" href="../../external/yui/2.8.2r1/build/assets/skins/sam/resize.css">
		<link rel="stylesheet" type="text/css" href="../../external/yui/2.8.2r1/build/assets/skins/sam/layout.css">
		<!-- Utility Dependencies -->
		<script src="../../external/yui/2.8.2r1/build/yahoo-dom-event/yahoo-dom-event.js"></script>
		<script src="../../external/yui/2.8.2r1/build/dragdrop/dragdrop-min.js"></script>
		<script src="../../external/yui/2.8.2r1/build/element/element-min.js"></script>
		<!-- Optional Animation Support-->
		<script src="../../external/yui/2.8.2r1/build/animation/animation-min.js"></script>
		<!-- Optional Resize Support -->
		<script src="../../external/yui/2.8.2r1/build/resize/resize-min.js"></script>
		<!-- Source file for the Layout Manager
		<script src="../../external/yui/2.8.2r1/build/layout/layout-min.js"></script>
		-->

		<!-- DATATABLE DEFS -->
		<link type="text/css" rel="stylesheet" href="../../external/yui/2.8.2r1/build/datatable/assets/skins/sam/datatable.css">
		<!-- datatable Dependencies -->
		<script type="text/javascript" src="../../external/yui/2.8.2r1/build/datasource/datasource-min.js"></script>
		<!-- OPTIONAL: Drag Drop (enables resizeable or reorderable columns) -->
		<script type="text/javascript" src="../../external/yui/2.8.2r1/build/dragdrop/dragdrop-min.js"></script>
		<!-- Source files -->
		<script type="text/javascript" src="../../external/yui/2.8.2r1/build/datatable/datatable-min.js"></script>
		<!-- END DATATABLE DEFS-->

		<!-- PAGINATOR -->
		<link rel="stylesheet" type="text/css" href="../../external/yui/2.8.2r1/build/paginator/assets/skins/sam/paginator.css">
		<script type="text/javascript" src="../../external/yui/2.8.2r1/build/paginator/paginator-min.js"></script>
		<!-- END PAGINATOR -->

		<link rel="stylesheet" type="text/css" href="../../external/yui/2.8.2r1/samples/yui-dt-expandable.css"/>
		<script type="text/javascript" src="../../external/yui/2.8.2r1/samples/yui-dt-expandable.js"></script>
		<!-- END YUI -->

		<script type="text/javascript" src="../../external/jquery/jquery.js"></script>


		<style type="text/css">
button {
	width: 80px;
}
			.dtyField {
				padding-bottom: 3px;
				padding-top: 3px;
				display: block;
			}
			.dtyLabel {
				display: inline-block;
				width: 150px;
				text-align: right;
				padding-right: 3px;
			}
			.dtyValue {
				display: inline-block;
			}
			.yui-dt table
			{
				width: 590;
				max-width: 590;
			}
			.yui-dt-highlighted {
    			background-color: #000;
    			color: #FFF;
			}
			.tooltip {
				position:absolute;
				z-index:999;
				left:-9999px;
				top:0px;
				background-color:#dedede;
				padding:5px;
				border:1px solid #fff;
				min-width:300;
				min-height:300;
			}

.depth0 {
	margin-left: 0px;
}
.depth1 {
	margin-left: 10px;
}
.depth2 {
	margin-left: 20px;
}
.depth3 {
	margin-left: 30px;
}
.depth4 {
	margin-left: 40px;
}
.depth5 {
	margin-left: 50px;
}
.depth6 {
	margin-left: 60px;
}
.depth7 {
	margin-left: 70px;
}

.termTree {
	float: left;
	border-style: groove;
	width: 33%;
	height: 80%;
	overflow: auto;
}
.selectedTerms {
	float: left;
	border-style: groove;
	width: 33%;
	height: 80%;
	overflow: auto;
}
.termTreeText {
	width: 33%;
	padding:2px;
	float: left;
	vertical-align: bottom;
}
.selectedTermsText {
	width: 33%;
	padding:2px;
	float: left;
}
.previewListText {
	padding:2px;
	float: left;
}
.previewList {
	width: 180px;
	max-width: 180px;
}
.termHeader {
	font-weight: bold;
	color: black;
}
.dtyName {
	padding-bottom: 3px;
	padding-top: 3px;
}

		</style>

	</head>

	<body class="yui-skin-sam" style="overflow: auto;">

		<script type="text/javascript" src="../../common/js/utilsLoad.js"></script>
		<script src="../../common/php/displayPreferences.php"></script>
		<script src="../../common/php/loadCommonInfo.php"></script>
		<script type="text/javascript" src="../../records/edit/editRecord.js"></script>
		<script type="text/javascript" src="../../records/edit/relationshipsObjectLibrary.js"></script>
		<script type="text/javascript" src="../../common/js/utilsUI.js"></script>

		<script type="text/javascript" src="editRecStructure.js"></script>
		<script type="text/javascript" src="selectTerms.js"></script>
		<script type="text/javascript" src="selectRectype.js"></script>

<!-- DEBUG
		<div style="display: none;">rty_ID:<input id="ed_rty_ID" value="1"/><input type="button" value="change" onclick="_tempFillValue()"/></div>
-->
<!-- panel to filter json terms tree -->
		<div class="tooltip" id="termsFilter">
			<h1 class="dtyName" id="dtyName"></h1>
			<div id="termTreeText" class="termTreeText"><h3>Select the terms you want</h3></div>
			<div id="termTreeText" class="selectedTermsText"><h3>This is filtered tree</h3></div>
			<div id="termTreeText" class="previewListText"><h3>Preview the result</h3></div>

			<div id="termTree" class="termTree ygtv-checkbox"></div>
			<div id="selectedTermsTree" class="selectedTerms ygtv-checkbox"></div>
			<div id="termTreeText" class="previewListText">
				<div>
					<button title="Clear selection" onclick="selectTerms.clearSelection()">Clear</button>
					<button title="Clear disbales" onclick="selectTerms.clearDisables()">Enable All</button>
				</div>
				<div><select id="previewList" class="previewList"></select></div>
				<div>
					<button title="Clear selection" onclick="selectTerms.apply();">Select</button>
					<button title="Clear disbales" onclick="selectTerms.cancel()">Cancel</button>
				</div>
			</div>
		</div>

<!-- panel to filter rectype pointers -->
		<div class="tooltip" id="pointerFilter">
			<div id="tb_top" style="height:30">
				<div style="display:inline-block; max-width:150;"><div id="dt_pagination_top"></div></div>
				<div style="float:right; text-align:right;padding-top:5px;">
					<label id="lblSelect1"></label>
					<input type="button" tabindex="12" value="Cancel" onclick="selectRecordType.cancel();" />
					<input type="button" tabindex="11" id="btnApply1" value="Set filter" onclick="selectRecordType.returnSelection();" />
				</div>
			</div>
			<div id="tabContainer"></div>
		</div>


<!-- panel to filter rectype pointers -->
		<div class="tooltip" id="pointerFilter">
			<button onclick="closeDivPopup()">Close</button>
		</div>
<!-- width:600; -->
		<div id="modelTabs" class="yui-navset yui-navset-top" style="margin:auto;text-align:left">

			<script  type="text/javascript">
				//
				//  starts initialization on load completion of this window
				//
				YAHOO.util.Event.addListener(window, "load", function(){  editStructure = new  EditRecStructure(); });

			</script>

		</div>
		<div style="width:600;margin:auto;text-align:left;">
			<input type="button" value="Back to list of record types" onclick="{window.history.back();}"/>
			<input type="button" value="Define New Field Type" onclick="onDefineNewType()"/>
		</div>

	</body>
</html>
