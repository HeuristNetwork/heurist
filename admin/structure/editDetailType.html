<!--

/**
* editDetailType.html
* A form to edit field type, or create a new field type. It is utilized as pop-up from manageDetailTypes and manageRectypes
* it may call another pop-ups: selectTerms and selectRectype
*
* 28/04/2011
* @author: Juan Adriaanse
* @author: Artem Osmakov
* @author: Stephen White
*
* @copyright (C) 2005-2011 University of Sydney Digital Innovation Unit.
* @link: http://HeuristScholar.org
* @license http://www.gnu.org/licenses/gpl-3.0.txt
* @package Heurist academic knowledge management system
* @todo
**/

-->

<html>
<head>

<meta http-equiv="content-type" content="text/html; charset=utf-8">
<title>Create new field type</title>

<link rel="stylesheet" type="text/css" href="../../common/css/global.css">

<!-- YUI -->
<link rel="stylesheet" type="text/css" href="../../external/yui/2.8.2r1/build/fonts/fonts-min.css" />
<script type="text/javascript" src="../../external/yui/2.8.2r1/build/yahoo-dom-event/yahoo-dom-event.js"></script>
<script type="text/javascript" src="../../external/yui/2.8.2r1/build/element/element-min.js"></script>
<script type="text/javascript" src="../../external/yui/2.8.2r1/build/history/history-min.js"></script>
<script type="text/javascript" src="../../external/yui/2.8.2r1/build/json/json-min.js"></script>

<style type="text/css">
.dtyField {
	display: block;
}
.dtyHiddenField {
	display: none;
}
.dtyLabel {
	display: inline-block;
	width: 130px;
	text-align: right;
	padding-right: 3px;
}
.dtyValue {
	display: inline-block;
}
.help1 {
	padding-left: 133px;
	padding-bottom: 2px;
}
.help2 {
	float: right;
	text-align: right;
}
.actionButtons {
	float:right;
	padding-right: 130px;
}

.termList {
	width: 300px;
	max-width: 300px;
}
.terms {
	float: left;
}
.termHeader {
	font-weight: bold;
	color: black;
}
.depth0 {
	margin-left: 0px;
}
.depth1 {
	margin-left: 10px;
}
.depth2 {
	margin-left: 20px;
}
.depth3 {
	margin-left: 30px;
}
.depth4 {
	margin-left: 40px;
}
.depth5 {
	margin-left: 50px;
}
.depth6 {
	margin-left: 60px;
}
.depth7 {
	margin-left: 70px;
}

</style>

</head>

<body>

		<script type="text/javascript" src="../../common/js/utilsLoad.js"></script>
		<script src="../../common/php/displayPreferences.php"></script>
		<script src="../../common/php/loadCommonInfo.php"></script>
		<script type="text/javascript" src="editDetailType.js"></script>

<div style="width:580;margin:auto;">

<br/>
<div id="statusMsg"></div>
<div id="detailTypeValues" style="{padding:5px;}" >
	<div class="dtyField">
		<label class="dtyLabel" for="dty_ID">Code:</label>
		<label id="dty_ID"></label>
	</div>
	<div class="dtyField">
		<label class="dtyLabel" for="dty_Name">Standard name:*</label>
		<input id="dty_Name" style="width:200;" maxlength="255" />
		<div class="help prompt help1">
			<label>The name the recordtype should have</label>
		</div>
	</div>
	<div class="dtyField">
		<label class="dtyLabel" for="dty_HelpText">Default help text:*</label>
		<input id="dty_HelpText" maxlength="255" style="width:420;"/>
		<div class="help prompt help1">
			<label>The text a user will see in front of the field</label>
		</div>
	</div>
	<div class="dtyField">
		<label class="dtyLabel" style="vertical-align:top" for="dty_ExtendedDescription">Description:</label>
		<textarea cols="200" id="dty_ExtendedDescription" rows="3" style="width:420;"></textarea>
		<div class="help prompt help1">
			<label>An advanced description, describing the field</label>
		</div>
	</div>
	<div class="dtyField">
		<label class="dtyLabel" for="dty_DetailTypeGroupID">Display group:</label>
		<select class="dtyValue" id="dty_DetailTypeGroupID"></select>
		<div class="help prompt help1">
			<label>The group to which this rectype should belong</label>
		</div>
	</div>

	<div class="dtyField" style="display:none">
		<label class="dtyLabel" for="dty_OrderInGroup">Order in group:</label>
		<input onkeypress="checkIfInteger(event)" maxlength="3" id="dty_OrderInGroup" style="width:30;"/>
		<div class="help prompt help1">
			<label>Whereabout the rectype should be shown in its group</label>
		</div>
	</div>

	<div class="dtyField">
		<label class="dtyLabel" for="dty_Status">Status:</label>
		<select class="dtyValue" id="dty_Status" onchange="window.detailTypeEditor.onChangeStatus(event)">
			<option>reserved</option>
			<option>approved</option>
			<option>pending</option>
			<option selected="selected">open</option>
		</select>
		<div class="help prompt help1">
			<label>The rectype's status. 'Reserverd' can not be changed, 'Open' is normal</label>
		</div>
	</div>
	<div class="dtyField">
		<label class="dtyLabel" for="dty_ShowInLists">Visible to end-user:</label>
		<input id="dty_ShowInLists" type="checkbox"/>
		<div class="help prompt help1">
			<label>Whether the user should be able to see this field</label>
		</div>
	</div>
	<div class="dtyField">
		<label class="dtyLabel" for="dty_Type">Data type:</label>
		<select class="dtyValue" id="dty_Type" onchange="window.detailTypeEditor.onChangeType(event)">
			<option>freetext</option>
			<option>blocktext</option>
			<option>integer</option>
			<option>date</option>
			<option>year</option>
			<option>relmarker</option>
			<option>boolean</option>
			<option>enum</option>
			<option>relationtype</option>
			<option>resource</option>
			<option>float</option>
			<option>file</option>
			<option>geo</option>
			<option>separator</option>
			<option>calculated</option>
			<option>fieldsetmarker</option>
		</select>
		<div class="help prompt help1">
			<label>The type of data this rectype accepts</label>
		</div>
	</div>


	<div id="pnl_fieldsetmarker" style="display:none;">
		<label class="dtyLabel" for="dty_FieldSetRecTypeIDPreview">Fieldset rectype:</label>
		<span class="dtyValue" id="dty_FieldSetRecTypeIDPreview" style="width:270px;"></span>
		<input type="button" value="Select Record Type" id="btnSelRecType1" onclick="window.detailTypeEditor.onSelectRectype()"/>
		<div class="help prompt help1">
			<label>The recordtype that describes this fieldset</label>
		</div>
	</div>

	<div id="pnl_enum"  style="display:none;">
		<label class="dtyLabel" for="termsPreview">Vocabulary:</label>
		<div class="dtyValue" id="termsPreview"></div>
		<input type="button" value="Change vocabulary" id="btnSelTerms" onclick="window.detailTypeEditor.onSelectTerms()"/>
		<div class="help prompt help1">
			<label>The terms which define this enum/relationtype/relmarker</label>
		</div>
	</div>

	<div id="pnl_relmarker" style="display:none;">
		<label class="dtyLabel" for="dty_PtrTargetRectypeIDsPreview">Pointer targets:</label>
		<span class="dtyValue" id="dty_PtrTargetRectypeIDsPreview" style="width:270px;"></span>
		<input type="button" value="Select Record Types" id="btnSelRecType2" onclick="window.detailTypeEditor.onSelectRectype()"/>
		<div class="help prompt help1">
			<label>The rectypes this pointer/relmarker detailtype should point to</label>
		</div>
	</div>

	<input type="hidden" id="dty_JsonTermIDTree"/>  <!-- for enum, relationtype, relmarker. Preview select is in termsPreview -->
	<input type="hidden" id="dty_TermIDTreeNonSelectableIDs"/> <!-- disabled terms for the same types as above -->
	<input type="hidden" id="dty_PtrTargetRectypeIDs"/>  <!-- for resource and relmarker -->
	<input type="hidden" id="dty_FieldSetRecTypeID"/>  <!-- for fieldsetmarker -->

</div>
<br />
<div class="actionButtons">
		<input type="button" style="height: 25px; width: 99px" value="Save" onclick="window.detailTypeEditor.save();" />
		<input type="button" style="height: 25px; width: 99px" value="Cancel" onclick="window.detailTypeEditor.cancel();" />
</div>
</div>

<script type="text/javascript">
	//
	//  starts initialization on load completion of this window
	//
	function loadHandler(){
		window.detailTypeEditor = new DetailTypeEditor();
	}
	YAHOO.util.Event.addListener(window, "load", loadHandler);
	//to implment window.onbeforeunload = onbeforeunload;

</script>

</body>
</html>