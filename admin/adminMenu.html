<html>

	<!-- File: admin_menu.html Menu for database administrators, Ian Johnson 11 Oct 2010
	/**
	* @copyright 2005-2010 University of Sydney Digital Innovation Unit.
	* @link: http://HeuristScholar.org
	* @license http://www.gnu.org/licenses/gpl-3.0.txt
	* @package Heurist academic knowledge management system
	* @todo
	**/
	-->

	<head>
		<title>Heurist - [dbname!] Admin</title>
		<link rel="icon" href="../favicon.ico" type="image/x-icon">
		<link rel="shortcut icon" href="../favicon.ico" type="image/x-icon">
		<link rel="stylesheet" type="text/css" href="../common/css/global.css">
		<link rel="stylesheet" type="text/css" href="../common/css/admin.css">
	</head>
	<body>
		<script src="../external/jquery/jquery-1.5.1.min.js"></script>
		<script src="../external/jquery/jquery-ui-1.8.13.custom.min.js"></script>
		<script type="text/javascript" src="../external/yui/2.8.2r1/build/yahoo/yahoo-min.js"></script>
		<script type="text/javascript" src="../external/yui/2.8.2r1/build/json/json-min.js"></script>
		<script src="../common/js/utilsLoad.js"></script><!-- core HEURIST functions -->
		<script src="../common/js/utilsUI.js"></script><!-- core HEURIST functions -->



		<script type="text/javascript" src="../external/yui/2.8.2r1/build/yahoo/yahoo-min.js"></script>
		<script type="text/javascript" src="../external/yui/2.8.2r1/build/json/json-min.js"></script>
		<script src="../common/js/utilsLoad.js"></script> <!-- core HEURIST functions -->
		<script src="../common/js/utilsUI.js"></script> <!-- core HEURIST functions -->
		<script src="../common/php/displayPreferences.php"></script> <!-- sets body css classes based on prefs in session -->
		<script>
			$(function() {

				var icons = {
					header: "header",
					headerSelected: "headerselected"
				};
				$( "#sidebar-inner" ).accordion({
					collapsible: true,
					active:false,
					icons: icons
				});
			});

		</script>
		<script type="text/javascript">
			function loadContent(url){
				var recordFrame = document.getElementById("adminFrame");
				recordFrame.src = top.HEURIST.basePath+"common/html/msgLoading.html";
				setTimeout(function(){recordFrame.src = top.HEURIST.basePath+"admin/"+url;},500);
			};
		</script>
		<script>
			var bugReportURL = '../export/email/formEmailRecordPopup.html?rectype=bugreport&db=[dbname!]';
		</script>
		<a id=home-link href="../index.php?db=[dbname!]">
			<div id=logo title="Click the logo at top left of any Heurist page to return to your Favourites"></div>
		</a>
		<div id=version></div>
		<!-- database name -->
		<a id="dbSearch-link" href="../index.php?db=[dbname!]">
			<div id="dbname" >[dbname!] <span>Database Administration</span></div>
		</a>
		<div id="quicklinks" style="top:10px;right:15px">
			<ul id=quicklink-cell>
				<li id="reportBug" class="button white"><a href="#" onClick="top.HEURIST.util.popupURL(top, bugReportURL,{'close-on-blur': false,'no-resize': false, height: 400,width: 740,callback: function (title, bd, bibID) {if (bibID) {window.close(bibID, title);}} });return false;" title="Click to send a bug report or feature request" ><img src="../common/images/16x16.gif"></a></li>
				<li class="button white"><a href="javascript:void(0)" onClick="{top.HEURIST.util.reloadStrcuture();}" title="Click to clear the internal working memory of Heurist" >refresh memory</a></li>
			</ul>
		</div>

		<!-- sidebar -->
		<div id="sidebar">
			<div id="sidebar-inner">
				<!-- <div id="accordion">-->

				<h3><a href="#">DATABASE: </a>
				<span class="description">Overall management of the database and its relation with other Heurist databases registered in the Heurist index at HeuristScholar.org</span></h3>
				<div class="adminSection">
					<ul>

						<li class="seperator"><a href="#" onClick="loadContent('structure/getListOfDatabases.php')"
							type="List the databases on the current server">List databases</a></li>
						<li><a href="#" onClick="loadContent('setup/createNewDB.php')"
							type="Create a new database with essential structure elements">New database</a></li>
						<li><a href="#" onClick="loadContent('setup/straightCopyDatabase.php?db=[dbname!]')"
							title="Clones a complete database with all data, users, attached files, templates etc.">Clone database</a></li>
                        <li><a href="setup/deleteCurrentDB.php?db=[dbname!]"
                            title="Delete a database completely">Delete entire database</a></li>
                        <li><a href="setup/clearCurrentDB.php?db=[dbname!]"
                            title="Clear all data from the current database, database definitions are unaffected">Delete all records</a></li>

						<li class="seperator"><a href="#" onClick="loadContent('setup/registerDB.php?db=[dbname!]')"
							title="Register this database with the Heurist Master Index">Registration</a></li>
						<li><a href="#" onClick="loadContent('setup/editSysIdentification.php?db=[dbname!]')"
							title="Edit the internal metadata describing the database and set some global behaviours">Properties</a></li>
						<li><a href="#" onClick="loadContent('setup/editSysIdentificationAdvanced.php?db=[dbname!]')"
							title="Edit advanced behaviours">Advanced properties</a></li>
						<li><a href="#" onClick="loadContent('rollback/rollbackRecords.php?db=[dbname!]')"
							title="Selectively roll back the data in the database to a specific date and time)">Rollback</a></li>
						<li class="seperator"></li>
		</ul>
				</div>

				<h3><a href="#">STRUCTURE: </a>
				<span class="description">Management of the database model which defines the types of data which can be recorded and the layout of data entry</span></h3>
				<div class="adminSection">
					<ul>
						<li class="seperator"><a href="#" onClick="loadContent('structure/manageRectypes.php?db=[dbname!]')"
							title="Add new / modify existing record types and their use of globally defined fields">Record types</a></li>
						<li><a href="#" onClick="loadContent('structure/manageDetailTypes.php?db=[dbname!]')"
							title="Direct access to the global field definitions">Field types</a></li>
						<li><a href="#" onClick="loadContent('structure/editTerms.php?db=[dbname!]')"
							title="Define terms used for relationship types and for other enumerated fields">Terms</a></li>
						<li><a href="#" onClick="loadContent('structure/editRectypeConstraints.php?db=[dbname!]')"
							title="Define constraints on the record types which can be related, and allowable relationship types">Constraints</a></li>
						<li  class="seperator"><a href="#" onClick="loadContent('structure/selectDBForImport.php?db=[dbname!]')"
							title="Selectively import structural elements from other Heurist databases">Import structure</a></li>
						<li><a href="#" onClick="loadContent('describe/listRectypeDescriptions.php?db=[dbname!]')"
							title="Display/print a formatted view of the database structure">Structure (human readable)</a></li>
						<li><a href="#" onClick="loadContent('structure/getDBStructure.php?db=[dbname!]&amp;pretty=1')"
							title="Lists the record type and field definitions in a computer-readable form">Structure (exchange format)</a></li>
						<li><a href="#" onClick="loadContent('setup/editMimetypes.php?db=[dbname!]')"
							title="Define the relationship between file extensions and mime type">Mime types</a></li>
						<li class="seperator"></li>
					</ul>
				</div>


				<h3><a href="#">ACCESS: </a><span class="description">Management of users and groups, the assignment of users to group and the assignment of group tags</span></h3>
				<div class="adminSection">
					<ul>
						<!-- 17/10/11 - Artem has moved addition of users to the workgroups page -->
						<!-- TO DO: Take this menu entry out so that navigation is via user groups -->
						<li class="seperator"><a href="#" onClick="loadContent('ugrps/manageUsers.php?db=[dbname!]')"
							title="Add and edit database users and usergroups, including authorization of new users">Manage users</a></li>
						<li><a href="#"
							onClick="loadContent('ugrps/manageGroups.php?db=[dbname!]')"
							title="Assign users to usergroups and set their roles">Manage groups</a></li>
						<li><a href="#"
							onClick="loadContent('setup/getUserFromDB.php?db=[dbname!]')"
							title="Import users one at a time from another database on the system">Import a user</a></li>
						<li class="seperator"><a href="#"
							onClick="loadContent('ugrps/editGroupTags.php?db=[dbname!]')" title="Add and remove workgroup tags">Workgroup tags</a></li>
						<li><a href="#"
							onClick="loadContent('ugrps/quitGroupForSession.php?db=[dbname!]')" title="Quit a workgroup for this session to allow testing of non-group-members view">Quit workgroup temporarily</a></li>
</ul>
				</div>


				<h3><a href="#">UTILITIES: </a><span class="description">Verification of the integrity of the database and various data-cleaning functions and utilities</span></h3>
				<div class="adminSection">
					<ul>
						<li class="seperator"><a href="#"
												onClick="loadContent('verification/recalcTitlesAllRecords.php?db=[dbname!]')"
												title="Rebuilds the constructed record titles listed in search results, for all records">Rebuild titles</a></li>
						<!-- : Also have capabuility for specific records and rectypes</p> -->
						<li><a href="#"
							onClick="loadContent('verification/checkRectypeTitleMask.php?check=1&amp;db=[dbname!]')"
							title="Check correctness of each Record Type's title mask with respect to field definitions.">Check Title Masks</a></li>
						<li><a href="#"
							onClick="loadContent('verification/checkRectypeTitleMask.php?check=2&amp;db=[dbname!]')"
							title="Check correctness and synch canonical mask of each Record Type's title mask with respect to field definitions.">Synch Canonical Title Masks</a></li>
						<li><a href="#"
							onClick="loadContent('verification/listRecordPointerErrors.php?db=[dbname!]')"
							title="Find record pointer which point to an incorrect record type or to nothing at all">Invalid pointer check</a></li>
						<li><a href="#"
							onClick="loadContent('verification/listFieldTypeDefinitionErrors.php?db=[dbname!]')"
							title="Find field types with invalid terms or rectypes">Invalid field type check</a></li>
						<li><a href="#"
							onClick="loadContent('verification/listDuplicateRecords.php?fuzziness=10&amp;db=[dbname!]')"
							title="Fuzzy search to identify records which might contain duplicate data">Find duplicate records</a></li>
						<li><a href="#"
							onClick="loadContent('verification/checkXHTML.php?db=[dbname!]')"
							title="Check the wysiwyg text fields in records and blog entries for structural errors">Wysiwyg text check</a></li>
						<li><a href="#"
							onClick="loadContent('verification/checkInvalidChars.php?db=[dbname!]')"
							title="Check the wysiwyg text fields for invalid characters">Invalid characters check</a></li>
						<li><a href="#"
							onClick="loadContent('verification/cleanInvalidChars.php?db=[dbname!]')"
							title="Attempt to clean up invalid characters in the wysiwyg text fields">Clean invalid characters</a></li>
						<li><a href="../search/search.html?q=_BROKEN_&amp;w=all&amp;db=[dbname!]" target="_blank"
							title="Show records with URLs which point to a non-existant or otherwise faulty address">Broken URL search</a></li>
						<li class="seperator"><a href="../import/direct/getRecordsFromDB.php?db=[dbname!]" target="_blank"
							title="Import records directly from one database to another, mapping record types, fields types and terms">Database-to-database transfer</a></li>
						<!-- Section for specific maintenance functionality which will be removed later. Yes, could be run directly, but this makes them easily available-->
						<li><a href="../import/direct/upgradeToNamedFiles.php?db=[dbname!]" target="_blank"
							title="Update the old format bare-number associated file storage to new format path + name">Upgrade associated files naming</a></li>
						<li class="seperator"><a href="#" onClick="loadContent('../export/publish/manageReports.html?db=[dbname!]')"
							title="Add new / modify existing scheduled reports">Scheduled Reports</a></li>
					</ul>
				</div>
				<!--</div>-->
				<!-- end accordion -->
			</div>
		</div>
		<!-- end sidebar -->


		<div id="page">
			<div id="page-inner">
				<div class="contentframe">
					<iframe width="100%" height="100%" id="adminFrame" name="adminFrame" frameborder="0" src="../common/html/msgWelcomeAdmin.html"></iframe>
				</div>
			</div>
		</div>
	</body>
</html>